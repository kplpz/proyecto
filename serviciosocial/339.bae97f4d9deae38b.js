"use strict";(self.webpackChunkserviciosocial=self.webpackChunkserviciosocial||[]).push([[339],{2722:(pe,b,l)=>{l.r(b),l.d(b,{UsuarioModule:()=>ce});var h=l(6019),C=l(6225),d=l(9133),v=l(2501),U=l(3405),L=l(540),y=l(1659),p=l.n(y);class I{constructor(a,t,n,o,i,s,u,m,c,g,f){this.id=a,this.nombreusuario=t,this.password=n,this.role=o,this.correo=i,this.codigorecuperacion=s,this.estado=u,this.expiracioncr=m,this.temporal=c,this.estudiante=g,this.administradoru=f}}class R{constructor(a,t,n,o,i){this.id=a,this.nombres=t,this.apellidos=n,this.telefono=o,this.carnet=i}}class A{constructor(a,t,n,o){this.id=a,this.nombres=t,this.apellidos=n,this.telefono=o}}var M=l(2047),e=l(3668),V=l(5643),T=l(8260),S=l(4522);let w=(()=>{class r{constructor(t){this.http=t,this.url=`${T.N.urlG}/estudiante`}estudiantes(){return this.http.get(`${this.url}/disponibles`)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(S.eN))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),O=(()=>{class r{constructor(t){this.http=t,this.url=`${T.N.urlG}/administrador`}administradores(t){return this.http.get(`${this.url}/disponibles/${t}`)}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275inject(S.eN))},r.\u0275prov=e.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var k=l(3120),_=l(549),F=l(4576),N=l(1950),E=l(868);const D=function(r,a){return{" bg-info":r," bg-danger":a}};function P(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td",31),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",32),e.\u0275\u0275elementStart(10,"p",33),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",25),e.\u0275\u0275elementStart(13,"button",34),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext(),u=e.\u0275\u0275reference(51);return s.editarlo(i,u)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"button",35),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().eliminar(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=a.$implicit,n=a.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.nombreusuario),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.correo),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ","ROLE_SUPER_ADMIN"===t.role?"Super Admin":"ROLE_ADMIN_REDES"===t.role?"Admin Redes":"ROLE_ESTUDIANTE"===t.role?"Estudiante":"Pasante"," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,D,"Activo"===t.estado,"Inactivo"===t.estado)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.estado)}}function j(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"option",61),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.rol," ")}}function $(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function z(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"ng-option",62),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.carnet)}}function B(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function G(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"ng-option",62),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",t.nombres," ",t.apellidos,"")}}function Q(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function J(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function K(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Tama\xf1o m\xednimo de usuario 4"),e.\u0275\u0275elementEnd())}function X(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function q(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Tama\xf1o m\xednimo de espacio f\xedsico 4"),e.\u0275\u0275elementEnd())}function Y(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function Z(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Tama\xf1o m\xednimo de correo 4"),e.\u0275\u0275elementEnd())}function H(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Formato de correo no v\xe1lido "),e.\u0275\u0275elementEnd())}function W(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275elementStart(1,"div",37),e.\u0275\u0275elementStart(2,"h1",38),e.\u0275\u0275text(3,"Usuarios"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")})("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().reset()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",40),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().accion()}),e.\u0275\u0275elementStart(6,"div",41),e.\u0275\u0275elementStart(7,"label",42),e.\u0275\u0275text(8," * Campo obligatorio"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",2),e.\u0275\u0275elementStart(10,"div",43),e.\u0275\u0275elementStart(11,"div",44),e.\u0275\u0275elementStart(12,"label",45),e.\u0275\u0275text(13,"Rol"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"span",46),e.\u0275\u0275text(15," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"select",47),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().estados()}),e.\u0275\u0275elementStart(17,"option",48),e.\u0275\u0275text(18,"Seleccione"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,j,2,2,"option",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",50),e.\u0275\u0275template(21,$,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",44),e.\u0275\u0275elementStart(23,"label",45),e.\u0275\u0275text(24,"Estudiante"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"span",46),e.\u0275\u0275text(26," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"ng-select",52),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().generarRandomPassword()}),e.\u0275\u0275elementStart(28,"ng-option",48),e.\u0275\u0275text(29,"Seleccione"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,z,2,2,"ng-option",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",50),e.\u0275\u0275template(32,B,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",44),e.\u0275\u0275elementStart(34,"label",45),e.\u0275\u0275text(35,"Administrador"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"span",46),e.\u0275\u0275text(37," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"ng-select",54),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().generarRandomPassword()}),e.\u0275\u0275elementStart(39,"ng-option",48),e.\u0275\u0275text(40,"Seleccione"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(41,G,2,3,"ng-option",53),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",50),e.\u0275\u0275template(43,Q,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",43),e.\u0275\u0275elementStart(45,"div",44),e.\u0275\u0275elementStart(46,"label",45),e.\u0275\u0275text(47,"Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"span",46),e.\u0275\u0275text(49," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(50,"input",55),e.\u0275\u0275elementStart(51,"div",50),e.\u0275\u0275template(52,J,2,0,"span",51),e.\u0275\u0275template(53,K,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"div",44),e.\u0275\u0275elementStart(55,"label",45),e.\u0275\u0275text(56,"Contrase\xf1a"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"span",46),e.\u0275\u0275text(58," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(59,"input",56),e.\u0275\u0275elementStart(60,"div",50),e.\u0275\u0275template(61,X,2,0,"span",51),e.\u0275\u0275template(62,q,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",44),e.\u0275\u0275elementStart(64,"label",45),e.\u0275\u0275text(65,"Correo Electr\xf3nico"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"span",46),e.\u0275\u0275text(67," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"input",57),e.\u0275\u0275listener("input",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().autocompleteUsuario(o.target.value)})("ngModelChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().correo=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"div",50),e.\u0275\u0275template(70,Y,2,0,"span",51),e.\u0275\u0275template(71,Z,2,0,"span",51),e.\u0275\u0275template(72,H,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"div",58),e.\u0275\u0275elementStart(74,"button",59),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().reset()})("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")}),e.\u0275\u0275text(75,"Cerrar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"button",60),e.\u0275\u0275text(77),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext();let n,o,i,s,u,m,c,g,f,x;e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.formulario),e.\u0275\u0275advance(11),e.\u0275\u0275classMap(t.esCampoValido("rol")),e.\u0275\u0275property("ngModel",null!=t.usuarioSeleccionado?t.usuarioSeleccionado.role:""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.Roles),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(n=t.formulario.get("rol"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(t.esCampoValido("estudiante")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.estudiantes),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(o=t.formulario.get("estudiante"))||null==o.errors?null:o.errors.required),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(t.esCampoValido("administradoru")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.administradores),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(i=t.formulario.get("administradoru"))||null==i.errors?null:i.errors.required),e.\u0275\u0275advance(7),e.\u0275\u0275classMap(t.esCampoValido("nombreusuario")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(s=t.formulario.get("nombreusuario"))||null==s.errors?null:s.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(u=t.formulario.get("nombreusuario"))||null==u.errors?null:u.errors.minlength),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",null==(m=t.formulario.get("password"))||null==m.errors?null:m.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(c=t.formulario.get("password"))||null==c.errors?null:c.errors.minlength),e.\u0275\u0275advance(6),e.\u0275\u0275classMap(t.esCampoValido("correo")),e.\u0275\u0275property("ngModel",t.correo),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(g=t.formulario.get("correo"))||null==g.errors?null:g.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(f=t.formulario.get("correo"))||null==f.errors?null:f.errors.minlength),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(x=t.formulario.get("correo"))||null==x.errors?null:x.errors.pattern),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.formulario.valid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.butttonText)}}function ee(r,a){if(1&r&&(e.\u0275\u0275elementStart(0,"option",61),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.rol," ")}}function te(r,a){1&r&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function ne(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275elementStart(1,"div",37),e.\u0275\u0275elementStart(2,"h1",38),e.\u0275\u0275text(3,"Usuarios"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")})("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().reset()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"form",40),e.\u0275\u0275listener("ngSubmit",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().editar()}),e.\u0275\u0275elementStart(6,"div",41),e.\u0275\u0275elementStart(7,"label",42),e.\u0275\u0275text(8," * Campo obligatorio"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",2),e.\u0275\u0275elementStart(10,"div",63),e.\u0275\u0275elementStart(11,"div",44),e.\u0275\u0275elementStart(12,"label",45),e.\u0275\u0275text(13,"Rol"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"span",46),e.\u0275\u0275text(15," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"select",47),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().estados()}),e.\u0275\u0275elementStart(17,"option",48),e.\u0275\u0275text(18,"Seleccione"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(19,ee,2,2,"option",49),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",50),e.\u0275\u0275template(21,te,2,0,"span",51),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",58),e.\u0275\u0275elementStart(23,"button",59),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().reset()})("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")}),e.\u0275\u0275text(24,"Cerrar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",64),e.\u0275\u0275text(26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&r){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.formulario),e.\u0275\u0275advance(11),e.\u0275\u0275classMap(t.esCampoValido("rol")),e.\u0275\u0275property("ngModel",null!=t.usuarioSeleccionado?t.usuarioSeleccionado.role:""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.Roles),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(n=t.formulario.get("rol"))||null==n.errors?null:n.errors.required),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.butttonText)}}function re(r,a){if(1&r){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",65),e.\u0275\u0275elementStart(1,"h1",66),e.\u0275\u0275text(2,"Ayuda"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",67),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",68),e.\u0275\u0275elementStart(5,"div"),e.\u0275\u0275elementStart(6,"h2",69),e.\u0275\u0275text(7,"Ventana de Informaci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"ul"),e.\u0275\u0275elementStart(9,"p",70),e.\u0275\u0275elementStart(10,"strong"),e.\u0275\u0275text(11,"Bot\xf3n Agregar:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",71),e.\u0275\u0275text(13,"Permite ingresar los datos solicitados para generar un nuevo usuario del sistema, tener en cuenta que solo se pueden registrar correos electr\xf3nicos institucionales proporcionados por la Universidad de El Salvador."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"ul"),e.\u0275\u0275elementStart(15,"p",70),e.\u0275\u0275elementStart(16,"strong"),e.\u0275\u0275text(17,"Bot\xf3n Editar:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"p",71),e.\u0275\u0275text(19,"Permite realizar cambios en rol, estudiante o administrador del usuario seleccionado."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"ul"),e.\u0275\u0275elementStart(21,"p",70),e.\u0275\u0275elementStart(22,"strong"),e.\u0275\u0275text(23,"Bot\xf3n Estado:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",71),e.\u0275\u0275text(25,"Permite cambiar el estado del usuario que pueden ser Activo e Inactivo."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",72),e.\u0275\u0275elementStart(27,"button",59),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.close("Close click")}),e.\u0275\u0275text(28,"Cerrar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}}const oe=[{path:"lista",component:(()=>{class r{constructor(t,n,o,i,s,u){this.usuarioService=t,this.estudianteService=n,this.administradorService=o,this.authService=i,this.modalService=s,this.fb=u,this.usuarios=[],this.estudiantes=[],this.administradores=[],this.Roles=[],this.estadoEstudiante=!0,this.correo="",this.correoRegex=/^[a-zA-Z0-9._%+-]+@ues\.edu\.sv$/,this.dtOptions={},this.dtTrigger=new U.xQ,this.formulario=this.initFomulario()}ngOnInit(){this.user=this.authService.getUserFromLocalCache();const o={id:"ROLE_ESTUDIANTE",rol:"Estudiante"},i={id:"ROLE_PASANTE",rol:"Pasante"};"ROLE_SUPER_ADMIN"==this.user.role?(this.Roles.push({id:"ROLE_SUPER_ADMIN",rol:"Super Admin"}),this.Roles.push({id:"ROLE_ADMIN_REDES",rol:"Admin Redes"}),this.Roles.push(o),this.Roles.push(i)):"ROLE_ADMIN_REDES"==this.user.role&&(this.Roles.push(o),this.Roles.push(i)),this.breadCrumbItems=[{label:"Usuario"},{label:"Listado",active:!0}],this.dtOptions={columnDefs:[{className:"",targets:[0,1,2,3,4]},{orderable:!1,targets:[4]},{searchable:!1,targets:[4]},{responsivePriority:1,targets:-1}],lengthMenu:[5,10,20,50],destroy:!0,language:{url:"//cdn.datatables.net/plug-ins/1.13.5/i18n/es-ES.json",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"Ning\xfan dato encontrado"},pagingType:"full_numbers",responsive:!0},this.cargarDatos()}cargarDatos(){this.usuarioService.usuarios().subscribe(t=>{this.usuarios=t,"ROLE_ADMIN_REDES"==this.user.role&&(this.usuarios=this.usuarios.filter(n=>"ROLE_ESTUDIANTE"===n.role||"ROLE_PASANTE"===n.role)),this.dtTrigger.next()})}ngOnDestroy(){this.dtTrigger.unsubscribe()}llenarEstudiantes(){this.estudianteService.estudiantes().subscribe(t=>{this.estudiantes=t,this.estudiantes.sort((n,o)=>n.carnet.localeCompare(o.carnet))})}llenarAdministradores(t){this.administradorService.administradores(t).subscribe(n=>{this.administradores=n,this.administradores.sort((o,i)=>o.apellidos.localeCompare(i.apellidos))})}eliminar(t){p().fire({title:"\xbfEst\xe1 seguro de modificar el estado? ",text:"Esto se puede revertir",icon:"question",showCancelButton:!0,confirmButtonText:"S\xed, cambiar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed?this.usuarioService.estado(t).subscribe(o=>{p().fire("Modificado","El estado ha sido modificado","success"),this.reload(),this.cargarDatos()},o=>{p().fire({icon:"error",title:"Error",text:o.error.msg})}):n.isDenied&&p().fire("Cambios no aplicados","","info")})}initFomulario(){return this.fb.group({nombreusuario:["",[d.kI.required,d.kI.minLength(4)]],password:["",[d.kI.required]],rol:["",[d.kI.required]],correo:["",[d.kI.required,d.kI.minLength(4),d.kI.pattern("^[a-zA-Z0-9._%+-]+@ues.edu.sv$")]],estudiante:["",[d.kI.required]],administradoru:["",[d.kI.required]]})}reset(){this.formulario.reset()}reload(){this.dtElement.dtInstance.then(t=>{t.destroy()})}openModal(t,n){n?(this.llenarEstudiantes(),this.llenarAdministradores(0),this.usuarioSeleccionado=null,this.butttonText="Guardar",this.formulario.reset(),this.modalService.open(t)):(this.llenarEstudiantes(),this.usuarioSeleccionado.administradoru&&this.llenarAdministradores(this.usuarioSeleccionado.administradoru.id),this.butttonText="Editar",this.formulario.get("estudiante").enable(),this.formulario.get("administradoru").enable(),this.usuarioSeleccionado&&this.usuarioSeleccionado.estudiante&&this.usuarioSeleccionado.estudiante.id?(this.formulario.get("estudiante").setValue(this.usuarioSeleccionado.estudiante.carnet),this.formulario.get("administradoru").disable()):this.usuarioSeleccionado&&this.usuarioSeleccionado.administradoru&&this.usuarioSeleccionado.administradoru.id&&(this.formulario.get("estudiante").disable(),this.formulario.get("administradoru").setValue(this.usuarioSeleccionado.administradoru.id)),this.modalService.open(t))}accion(){null!=this.usuarioSeleccionado?this.editar():this.guardar()}editarlo(t,n){this.formulario.patchValue(t),this.usuarioSeleccionado=t,this.openModal(n,!1)}guardar(){const t=this.formulario.get("nombreusuario").value,n=this.formulario.get("password").value,o=this.formulario.get("rol").value,i=this.formulario.get("correo").value,s=this.formulario.get("administradoru").value,u=this.formulario.get("estudiante").value;return null!==s?(this.administrador=new A(s,null,null,null),this.estudiante=null):(this.administrador=null,this.estudiante=new R(u,null,null,null,null)),this.usuario=new I(null,t,n,o,i,null,"Activo",null,"Activo",this.estudiante,this.administrador),this.usuarioService.guardar(this.usuario).pipe((0,M.K)(m=>{let c="Ocurri\xf3 un error en la solicitud";return m.error&&m.error.error&&(c=m.error.error,p().fire("Error",c,"error")),(0,L._)(c)})).subscribe(m=>{p().fire("\xc9xito","Almacenado correctamente","success"),this.modalService.dismissAll(),this.usuarioSeleccionado=null,this.reset(),this.reload(),this.cargarDatos()}),Object.values(this.formulario.controls).forEach(m=>m.markAsTouched())}estados(){var t,n,o,i;"ROLE_ESTUDIANTE"==this.formulario.get("rol").value?(null===(t=this.formulario.get("administradoru"))||void 0===t||t.disable(),null===(n=this.formulario.get("estudiante"))||void 0===n||n.enable()):(null===(o=this.formulario.get("administradoru"))||void 0===o||o.enable(),null===(i=this.formulario.get("estudiante"))||void 0===i||i.disable())}editar(){const t=this.formulario.get("administradoru").value,n=this.formulario.get("estudiante").value;this.usuarioSeleccionado.role=this.formulario.get("rol").value,null!==this.usuarioSeleccionado&&(""!==t?null!==this.usuarioSeleccionado.administradoru&&(this.usuarioSeleccionado.administradoru.id=t,this.usuarioSeleccionado.estudiante=null):""!==n&&null!==this.usuarioSeleccionado.estudiante&&(this.usuarioSeleccionado.estudiante.id=n,this.usuarioSeleccionado.administradoru=null)),this.usuarioService.editar(this.usuarioSeleccionado).subscribe(o=>{p().fire("\xc9xito","Modificado correctamente","success"),this.modalService.dismissAll(),this.usuarioSeleccionado=null,this.reset(),this.reload(),this.cargarDatos()},o=>{p().fire({title:"Error",text:"Algo fallo",icon:"error"})})}estadosLista(t){this.estado=t.target.value,this.cargarConEstado()}cargarConEstado(){this.reload(),this.usuarioService.usuariosEstado(this.estado).subscribe(t=>{this.usuarios=[],"todos"===this.estado||"Seleccione"===this.estado?(this.usuarios=[],this.cargarDatos()):(this.usuarios=[],this.usuarios=t,"ROLE_ADMIN_REDES"==this.user.role&&(this.usuarios=this.usuarios.filter(n=>"ROLE_ESTUDIANTE"===n.role||"ROLE_PASANTE"===n.role)),this.dtTrigger.next())})}generarRandomPassword(){var t;const n='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!"#$%&/()=?\xa1*_-{}';let o="";for(let i=0;i<8;i++)o+=n[Math.floor(Math.random()*n.length)];this.formulario.get("password").setValue(o),null===(t=this.formulario.get("password"))||void 0===t||t.disable()}esCampoValido(t){const n=this.formulario.get(t);return!(null==n?void 0:n.valid)&&(null==n?void 0:n.touched)?"is-invalid":(null==n?void 0:n.touched)?"is-valid":""}validarCorreo(){return this.correoRegex.test(this.correo)}autocompleteUsuario(t){var n;const o=t.split("@");o.length>1&&(null===(n=this.formulario.get("nombreusuario"))||void 0===n||n.setValue(o[0]))}openModalA(t){this.modalService.open(t,{keyboard:!1,scrollable:!0,size:"lg"})}}return r.\u0275fac=function(t){return new(t||r)(e.\u0275\u0275directiveInject(V.j),e.\u0275\u0275directiveInject(w),e.\u0275\u0275directiveInject(O),e.\u0275\u0275directiveInject(k.T),e.\u0275\u0275directiveInject(_.FF),e.\u0275\u0275directiveInject(d.qu))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-listar-usuario"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(v.G,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.dtElement=o.first)}},decls:54,vars:4,consts:[[1,"container-fluid"],["title","Usuarios",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"col-sm-12","text-end"],[1,"text-sm-end","mb-3"],["type","button","data-toggle","tooltip","ngbTooltip","Ayuda","data-placement","end",1,"btn","btn-info","btn-icon","rounded-circle","btn-transparent",2,"margin-right","+35px",3,"click"],[1,"fa","fa-question-circle","fa-lg"],[1,"row","mb-2"],[1,"col-sm-6"],[1,"col-sm-4"],[1,"col-sm-3","mb-3"],["id","estadoU",1,"form-control","form-select",3,"change"],["value","Seleccione"],["value","Activo"],["value","Inactivo"],["value","todos"],[1,"col-sm-6","text-end"],[1,"btn","btn-info","btn-rounded","bg-gradient",3,"click"],[1,"mdi","mdi-plus","me-1"],["datatable","","width","100%",1,"table","table-nowrap",3,"dtOptions","dtTrigger"],[1,"bg-light","bg-gradient"],[1,""],[1,"text-center"],[4,"ngFor","ngForOf"],["role","document"],["modal",""],["modal_edit",""],["ayuda",""],["scope","row"],[1,"dt-center"],[1,"w-5","p-1","rounded","text-white",3,"ngClass"],["ngbTooltip","Editar",1,"btn","btn-outline-info","btn-sm","dripicons-document-edit",3,"click"],["ngbTooltip","Estado",1,"btn","btn-outline-danger","btn-sm","dripicons-clockwise",3,"click"],["id","modalUsuario","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"text-danger","mb-4"],[1,"col-md-6"],[1,"mb-3"],[1,"control-label"],[1,"text-danger"],["formControlName","rol",1,"form-control","form-select",3,"ngModel","change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","estudiante","placeholder","Seleccione",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","administradoru",3,"change"],["type","text","name","nombreusuario","autocomplete","off","formControlName","nombreusuario",1,"form-control"],["type","text","name","password","autocomplete","off","formControlName","password",1,"form-control"],["type","text","name","correo","autocomplete","off","formControlName","correo",1,"form-control",3,"ngModel","input","ngModelChange"],[1,"modal-footer","mt-5"],["type","button",1,"btn","btn-dark",3,"click"],["type","submit","id","btn-save-event",1,"btn","btn-info",3,"disabled"],[3,"ngValue"],[3,"value"],[1,"col-md-12"],["type","submit","id","btn-save-event",1,"btn","btn-info"],[1,"modal-header","bg"],[1,"modal-title","text-white"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body",2,"text-align","justify"],[2,"margin-bottom","15px"],[1,"fs-5"],[2,"font-size","15px"],[1,"modal-footer"]],template:function(t,n){if(1&t){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"app-loader"),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275element(2,"app-page-title",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",2),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275elementStart(9,"div",7),e.\u0275\u0275elementStart(10,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const s=e.\u0275\u0275reference(53);return n.openModalA(s)}),e.\u0275\u0275element(11,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label"),e.\u0275\u0275text(16,"Filtrar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",13),e.\u0275\u0275elementStart(18,"select",14),e.\u0275\u0275listener("change",function(s){return n.estadosLista(s)}),e.\u0275\u0275elementStart(19,"option",15),e.\u0275\u0275text(20,"Seleccione"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"option",16),e.\u0275\u0275text(22,"Activo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"option",17),e.\u0275\u0275text(24,"Inactivo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"option",18),e.\u0275\u0275text(26,"Todos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",19),e.\u0275\u0275elementStart(28,"button",20),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const s=e.\u0275\u0275reference(49);return n.openModal(s,!0)}),e.\u0275\u0275element(29,"i",21),e.\u0275\u0275text(30,"Agregar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"table",22),e.\u0275\u0275elementStart(32,"thead",23),e.\u0275\u0275elementStart(33,"tr"),e.\u0275\u0275elementStart(34,"th",24),e.\u0275\u0275text(35,"N\xb0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th",24),e.\u0275\u0275text(37,"Usuario"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"th",24),e.\u0275\u0275text(39,"Correo Electr\xf3nico"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"th",24),e.\u0275\u0275text(41,"Rol"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"th",24),e.\u0275\u0275text(43,"Estado"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th",25),e.\u0275\u0275text(45,"Acciones"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"tbody"),e.\u0275\u0275template(47,P,15,9,"tr",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,W,78,28,"ng-template",27,28,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(50,ne,27,7,"ng-template",27,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(52,re,29,0,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("breadcrumbItems",n.breadCrumbItems),e.\u0275\u0275advance(29),e.\u0275\u0275property("dtOptions",n.dtOptions)("dtTrigger",n.dtTrigger),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.usuarios))},directives:[F.R,N.V,_._L,d.YN,d.Kr,v.G,h.NgForOf,h.NgClass,d._Y,d.JL,d.sg,d.EJ,d.JJ,d.u,h.NgIf,E.w9,E.jq,d.Fj],styles:['@charset "UTF-8";.btn-icon.rounded-circle[_ngcontent-%COMP%]{width:20px;height:20px;padding:0;line-height:25px;font-size:20px}.btn-transparent[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#007bff}.btn-transparent[_ngcontent-%COMP%]:hover{color:#0056b3}.closeA[_ngcontent-%COMP%]{position:absolute;top:25px;left:750px}.modal-headerA[_ngcontent-%COMP%]{background-color:#6e0000;height:80px}.modal-titleA[_ngcontent-%COMP%]{color:#fff;position:absolute;top:20px;left:12px}.bg[_ngcontent-%COMP%]{background-color:#6e0000}']}),r})()}];let ae=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[[C.Bz.forChild(oe)],C.Bz]}),r})();var ie=l(5396),le=l(3091),se=l(5450),de=l(8975),me=l(194),ue=l(7337);let ce=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[[h.CommonModule,ae,d.u5,_.XC,_.bz,ie.X,d.UX,S.JF,le.v,ue.y,_.Oz,_.HK,_.lQ,me.t,se.QM,de.u3.forRoot(),v.T,E.A0]]}),r})()}}]);