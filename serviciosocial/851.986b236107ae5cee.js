"use strict";(self.webpackChunkserviciosocial=self.webpackChunkserviciosocial||[]).push([[851],{8851:(_,v,s)=>{s.r(v),s.d(v,{AccountModule:()=>S});var m=s(6019),o=s(6225),d=s(3668);const h=[{path:"auth",loadChildren:()=>Promise.resolve().then(s.bind(s,3788)).then(e=>e.AuthModule)}];let b=(()=>{class e{}return e.\u0275fac=function(f){return new(f||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[o.Bz.forChild(h)],o.Bz]}),e})();var c=s(3788);let S=(()=>{class e{}return e.\u0275fac=function(f){return new(f||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[m.CommonModule,b,c.AuthModule]]}),e})()},3788:(_,v,s)=>{s.r(v),s.d(v,{AuthModule:()=>ee});var m=s(6019),o=s(9133),d=s(549),h=s(3218),b=s(3091),c=s(6225),S=s(3921),e=s(3668),p=s(3120);let f=(()=>{class t{constructor(){}setCorreo(n){this.correo=n}getCorreo(){return this.correo}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function w(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"ngb-alert",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function F(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Campo requeirdo"),e.\u0275\u0275elementEnd())}function T(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Debe ser un correo valido"),e.\u0275\u0275elementEnd())}function M(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275template(1,F,2,0,"div",28),e.\u0275\u0275template(2,T,2,0,"div",28),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.correo.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.correo.errors.correo)}}function j(t,i){1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function R(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275template(1,j,2,0,"span",28),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.password.errors.required)}}function L(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",29),e.\u0275\u0275elementStart(1,"div",30),e.\u0275\u0275elementStart(2,"span",31),e.\u0275\u0275text(3,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}const C=function(t){return{"is-invalid":t}};let P=(()=>{class t{constructor(n,r,a,l,u){this.authService=n,this.formBuilder=r,this.route=a,this.router=l,this.resetService=u,this.submitted=!1,this.error="",this.psstype="password",this.eye="mdi mdi-eye-off",this.cred={correo:"",password:""},this.loginForm=this.inif()}ngOnInit(){this.usuario=this.authService.getUserFromLocalCache(),this.authService.isUserLoggedIn()?(this.authService.hasRole(S.u.ROLE_ESTUDIANTE)&&this.router.navigateByUrl("/default"),this.router.navigateByUrl("/dash")):this.router.navigateByUrl("/account/login")}inif(){return this.formBuilder.group({correo:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required]]})}get f(){return this.loginForm.controls}login(){this.cred=this.loginForm.value,this.showLoading=!0,""==this.cred.correo||""==this.cred.password?this.error="Correo o contrase\xf1a vacios":this.authService.login(this.cred).subscribe(n=>{this.showLoading=!1},n=>{406==n.status&&(this.error="Usuario inactivo, si es un error contacte con el administrador",this.showLoading=!1),400==n.status&&(this.error="Lo sentimos, las credenciales que estas usando no son validas",this.showLoading=!1),302==n.status&&(this.resetService.setCorreo(this.cred.correo),this.router.navigate(["/account/reset"]),this.showLoading=!1)})}cambiar(){this.psstype="text"===this.psstype?"password":"text",this.eye="mdi mdi-eye-outline"===this.eye?"mdi mdi-eye-off":"mdi mdi-eye-outline"}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(p.T),e.\u0275\u0275directiveInject(o.qu),e.\u0275\u0275directiveInject(c.gz),e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(f))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-login"]],decls:35,vars:15,consts:[[1,"account-pages","my-5","pt-sm-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","overflow-hidden","log"],[1,"col-7","text-center","mt-3"],["src","assets/images/minerva2.png","alt","","width","150",1,"img-fluid"],[1,"mt-4","txtbl"],[1,"card-body","pt-0"],[1,"p-2"],[3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],[1,"mb-3"],["for","correo"],["type","correo","formControlName","correo","id","correo","placeholder","Ingrese correo",1,"form-control","bg-light",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],[1,"input-group","auth-pass-inputgroup"],["formControlName","password","placeholder","Ingrese contrase\xf1a","aria-label","Password","aria-describedby","password-addon",1,"form-control","bg-light",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-light","ms-0",3,"click"],[1,"mt-5","text-center"],[1,"btn","btn-dark"],[1,"mt-4","text-center"],["routerLink","/account/reset-password",1,"text-muted"],[1,"mdi","mdi-lock","mr-1"],["class","spinner-overlay",4,"ngIf"],["type","danger",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-overlay"],["role","status",1,"spinner-border","text-primary","m-1"],[1,"sr-only"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"img",6),e.\u0275\u0275elementStart(8,"h2",7),e.\u0275\u0275text(9,"INICIO DE SESI\xd3N"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275elementStart(12,"form",10),e.\u0275\u0275listener("ngSubmit",function(){return r.login()}),e.\u0275\u0275template(13,w,2,2,"ngb-alert",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Correo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",14),e.\u0275\u0275template(18,M,3,2,"div",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",12),e.\u0275\u0275elementStart(20,"label",16),e.\u0275\u0275text(21,"Contrase\xf1a"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",17),e.\u0275\u0275element(23,"input",18),e.\u0275\u0275elementStart(24,"button",19),e.\u0275\u0275listener("click",function(){return r.cambiar()}),e.\u0275\u0275element(25,"i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,R,2,1,"div",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",20),e.\u0275\u0275elementStart(28,"button",21),e.\u0275\u0275text(29,"Iniciar Sesi\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",22),e.\u0275\u0275elementStart(31,"a",23),e.\u0275\u0275element(32,"i",24),e.\u0275\u0275text(33," Recuperar contrase\xf1a"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(34,L,4,0,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(12),e.\u0275\u0275property("formGroup",r.loginForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.error),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,C,r.submitted&&r.f.correo.errors)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.correo.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("type",r.psstype)("ngClass",e.\u0275\u0275pureFunction1(13,C,r.submitted&&r.f.password.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275classMap(r.eye),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.password.errors),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",r.showLoading))},directives:[o._Y,o.JL,o.sg,m.NgIf,o.Fj,o.JJ,o.u,m.NgClass,c.yS,d.xm],styles:['@charset "UTF-8";.log[_ngcontent-%COMP%]{border-radius:10%}.txtbl[_ngcontent-%COMP%]{color:#000;font-weight:bold;text-shadow:3px 3px 2px #d1d1d1}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}']}),t})();var y=s(4762),A=s(1659),g=s.n(A);function O(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"ngb-alert",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function N(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function k(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Debe ser un correo valido"),e.\u0275\u0275elementEnd())}function U(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275elementStart(1,"div",23),e.\u0275\u0275elementStart(2,"span",24),e.\u0275\u0275text(3,"Cargando..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function D(t,i){if(1&t&&e.\u0275\u0275element(0,"app-verifcarcod",25),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("user",n.user)}}let x=(()=>{class t{constructor(n,r,a,l,u){this.formBuilder=n,this.route=r,this.router=a,this.authService=l,this.modalService=u,this.submitted=!1,this.error="",this.success="",this.loading=!1}ngOnInit(){this.resetForm=this.formBuilder.group({email:["",[o.kI.required,o.kI.pattern("^[a-zA-Z0-9._%+-]+@ues.edu.sv$")]]})}get f(){return this.resetForm.controls}enviarSolicitudRecuperacion(n){return(0,y.mG)(this,void 0,void 0,function*(){const r=this.resetForm.get("email").value;this.loading=!0,this.authService.recuperarContrasena(r.toLowerCase()).subscribe(a=>(0,y.mG)(this,void 0,void 0,function*(){this.loading=!1,g().fire("Succeess","C\xf3digo enviado, por favor revise su correo electr\xf3nico","success");const l=yield this.authService.obtenerUser(r).toPromise();this.user=l,this.modalService.open(n,{size:"",keyboard:!1,backdrop:"static",centered:!0})}),a=>{this.loading=!1,400===a.status&&(this.error="Correo electr\xf3nico no encontrado"),406===a.status&&(this.error="Usuario inactivo")})})}esCampoValido(n){const r=this.resetForm.get(n);return!(null==r?void 0:r.valid)&&(null==r?void 0:r.touched)?"is-invalid":(null==r?void 0:r.touched)?"is-valid":""}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(o.qu),e.\u0275\u0275directiveInject(c.gz),e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(p.T),e.\u0275\u0275directiveInject(d.FF))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-passwordreset"]],decls:27,vars:8,consts:[[1,"account-pages","my-5","pt-sm-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","overflow-hidden","log"],[1,"col-10","text-center","mt-3"],["src","assets/images/minerva2.png","alt","","width","150",1,"img-fluid"],[1,"mt-4","txtbl","txtsm"],[1,"card-body","pt-0","mt-5"],[1,"form-container"],["name","resetForm","novalidate","",1,"needs-validation",3,"formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"mb-3"],["for","email"],["type","email","formControlName","email","id","email","placeholder","Ingrese su correo",1,"form-control","bg-light"],[1,"invalid-feedback"],[4,"ngIf"],["class","spinner-overlay",4,"ngIf"],[1,"text-center","mt-5"],["type","submit","routerLinkActive","active",1,"btn","btn-dark","w-md","mb-5",3,"disabled","click"],["op",""],["type","danger",3,"dismissible"],[1,"spinner-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],[3,"user"]],template:function(n,r){if(1&n){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"img",6),e.\u0275\u0275elementStart(8,"h2",7),e.\u0275\u0275text(9,"RECUPERACI\xd3N DE CONTRASE\xd1A"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275elementStart(12,"form",10),e.\u0275\u0275template(13,O,2,2,"ngb-alert",11),e.\u0275\u0275elementStart(14,"div",12),e.\u0275\u0275elementStart(15,"label",13),e.\u0275\u0275text(16,"Correo electr\xf3nico"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",14),e.\u0275\u0275elementStart(18,"div",15),e.\u0275\u0275template(19,N,2,0,"div",16),e.\u0275\u0275template(20,k,2,0,"div",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,U,4,0,"div",17),e.\u0275\u0275elementStart(22,"div",18),e.\u0275\u0275elementStart(23,"button",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(a);const u=e.\u0275\u0275reference(26);return r.enviarSolicitudRecuperacion(u)}),e.\u0275\u0275text(24,"Enviar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,D,1,1,"ng-template",null,20,e.\u0275\u0275templateRefExtractor)}if(2&n){let a,l;e.\u0275\u0275advance(12),e.\u0275\u0275property("formGroup",r.resetForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.error),e.\u0275\u0275advance(4),e.\u0275\u0275classMap(r.esCampoValido("email")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(a=r.resetForm.get("email"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=r.resetForm.get("email"))||null==l.errors?null:l.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.loading),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",r.resetForm.invalid)}},styles:['@charset "UTF-8";.log[_ngcontent-%COMP%]{border-radius:10%}.txtbl[_ngcontent-%COMP%]{color:#000;font-weight:bold;text-shadow:3px 3px 2px #d1d1d1}.txtsm[_ngcontent-%COMP%]{font-size:medium}.form-container[_ngcontent-%COMP%]{position:relative}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.modal-backdrop[_ngcontent-%COMP%]{background-color:#00000080}.modal-dialog[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border:none;border-radius:10px;box-shadow:0 0 10px #00000080}']}),t})();var B=s(5643);function V(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"ngb-alert",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function z(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"ngb-alert",24),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.success)}}function J(t,i){1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function G(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,J,2,0,"span",26),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.password.errors.required)}}function Y(t,i){1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function q(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275template(1,Y,2,0,"span",26),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.f.confirmpassword.errors.required)}}const E=function(t){return{"is-invalid":t}};let Z=(()=>{class t{constructor(n,r,a,l){this.formBuilder=n,this.usuarioService=r,this.correoService=a,this.authService=l,this.submitted=!1,this.error="",this.success="",this.loading=!1,this.psstype="password",this.eye="mdi mdi-eye-off",this.cred={correo:"",password:""},this.formulario=this.init(),window.addEventListener("beforeunload",this.onBeforeUnload.bind(this))}ngOnInit(){return(0,y.mG)(this,void 0,void 0,function*(){this.correo=this.correoService.getCorreo();try{this.usuario=yield this.usuarioService.obtenerUsuarioCorreo(this.correo).toPromise()}catch(n){console.error("Error al obtener el usuario: ",n)}})}init(){return this.formBuilder.group({password:["",[o.kI.required]],confirmpassword:["",[o.kI.required]]})}get f(){return this.formulario.controls}reset(){const n=this.formulario.get("password").value,r=this.formulario.get("confirmpassword").value;""==r||""==n?this.error="Contrase\xf1as vacias":r.length<8||n.length<8?this.error="La contrase\xf1a debe contener 8 caracteres m\xednimo":n!=r?this.error="Las contrase\xf1as no coinciden":/[A-Z]/.test(n)&&/\d/.test(n)?(this.error="",n==r?(this.usuario.password=r,this.usuarioService.editarContrase\u00f1a(this.usuario).subscribe(a=>{this.cred.correo=this.usuario.correo,this.cred.password=n,this.authService.login(this.cred).subscribe(l=>{g().fire("\xc9xito","Contrase\xf1a modificada correctamente","success")})},a=>{g().fire({title:"Error",text:"Algo fallo",icon:"error"})})):g().fire({title:"Advertencia",text:"Las contrase\xf1as no coinciden",icon:"warning"})):this.error="La contrase\xf1a debe contener al menos una may\xfascula y un n\xfamero"}cambiar(){this.psstype="text"===this.psstype?"password":"text",this.eye="mdi mdi-eye-outline"===this.eye?"mdi mdi-eye-off":"mdi mdi-eye-outline"}onBeforeUnload(n){n.preventDefault(),n.returnValue="\xbfEst\xe1s seguro de que quieres abandonar esta p\xe1gina? Los cambios no guardados se perder\xe1n. Podr\xeda ocasionar un error."}ngOnDestroy(){window.removeEventListener("beforeunload",this.onBeforeUnload.bind(this))}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(o.qu),e.\u0275\u0275directiveInject(B.j),e.\u0275\u0275directiveInject(f),e.\u0275\u0275directiveInject(p.T))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-reset"]],decls:38,vars:19,consts:[[1,"account-pages","my-5","pt-sm-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6","col-xl-5"],[1,"card","overflow-hidden","log"],[1,"col-7","text-center","mt-3"],["src","assets/images/minerva2.png","alt","","width","150",1,"img-fluid"],[1,"mt-4","txtbl"],[1,"card-body","pt-0"],[1,"p-2"],[3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],["type","success",3,"dismissible",4,"ngIf"],[1,"mb-3"],["for","password"],[1,"input-group","auth-pass-inputgroup"],["formControlName","password","placeholder","Ingrese su nueva contrase\xf1a","aria-label","Password","aria-describedby","password-addon",1,"form-control","bg-light",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-light","ms-0",3,"click"],["class","invalid-feedback",4,"ngIf"],["formControlName","confirmpassword","placeholder","Ingrese nuevamente su contrase\xf1a","aria-label","Password","aria-describedby","password-addon",1,"form-control","bg-light",3,"type","ngClass"],[1,"mt-5","text-center"],[1,"btn","btn-dark"],[1,"mt-3","text-center"],["type","danger",3,"dismissible"],["type","success",3,"dismissible"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275element(7,"img",6),e.\u0275\u0275elementStart(8,"h5",7),e.\u0275\u0275text(9,"MODIFICACI\xd3N DE CONTRASE\xd1A"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"div",9),e.\u0275\u0275elementStart(12,"form",10),e.\u0275\u0275listener("ngSubmit",function(){return r.reset()}),e.\u0275\u0275template(13,V,2,2,"ngb-alert",11),e.\u0275\u0275template(14,z,2,2,"ngb-alert",12),e.\u0275\u0275elementStart(15,"div",13),e.\u0275\u0275elementStart(16,"label",14),e.\u0275\u0275text(17,"Contrase\xf1a nueva"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",15),e.\u0275\u0275element(19,"input",16),e.\u0275\u0275elementStart(20,"button",17),e.\u0275\u0275listener("click",function(){return r.cambiar()}),e.\u0275\u0275element(21,"i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(22,G,2,1,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",13),e.\u0275\u0275elementStart(24,"label",14),e.\u0275\u0275text(25,"Confirmar contrase\xf1a"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",15),e.\u0275\u0275element(27,"input",19),e.\u0275\u0275elementStart(28,"button",17),e.\u0275\u0275listener("click",function(){return r.cambiar()}),e.\u0275\u0275element(29,"i"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(30,q,2,1,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",20),e.\u0275\u0275elementStart(32,"button",21),e.\u0275\u0275text(33,"Modificar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",22),e.\u0275\u0275elementStart(35,"p"),e.\u0275\u0275elementStart(36,"small"),e.\u0275\u0275text(37,"No recargar esta p\xe1gina"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(12),e.\u0275\u0275property("formGroup",r.formulario),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.error),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.success),e.\u0275\u0275advance(5),e.\u0275\u0275property("type",r.psstype)("ngClass",e.\u0275\u0275pureFunction1(15,E,r.submitted&&r.f.password.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275classMap(r.eye),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.password.errors),e.\u0275\u0275advance(5),e.\u0275\u0275property("type",r.psstype)("ngClass",e.\u0275\u0275pureFunction1(17,E,r.submitted&&r.f.confirmpassword.errors)),e.\u0275\u0275advance(2),e.\u0275\u0275classMap(r.eye),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.submitted&&r.f.confirmpassword.errors))},directives:[o._Y,o.JL,o.sg,m.NgIf,o.Fj,o.JJ,o.u,m.NgClass,d.xm],styles:[".log[_ngcontent-%COMP%]{border-radius:10%}.txtbl[_ngcontent-%COMP%]{color:#000;font-weight:bold;text-shadow:3px 3px 2px #d1d1d1}"]}),t})();function H(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"ngb-alert",17),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dismissible",!1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function X(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1,"Campo requerido"),e.\u0275\u0275elementEnd())}function $(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"span",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}function K(t,i){if(1&t&&(e.\u0275\u0275elementStart(0,"span",18),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.error)}}let I=(()=>{class t{constructor(n,r,a,l,u){this.authService=n,this.router=r,this.fb=a,this.resetService=l,this.modalService=u,this.codigoR="",this.codigonoValido=!1,this.codigoExpirado=!1,this.error=""}ngOnInit(){this.verForm=this.fb.group({cod:[""]})}get f(){return this.verForm.controls}codigoRecuperacionExpirado(){const n=this.user.codigorecuperacion;if(this.codigoR=this.verForm.get("cod").value,""!=this.codigoR){const r=new Date,l=new Date(this.user.expiracioncr.toLocaleString("en-US",{timeZone:"UTC"})),u=(r.getTime()-l.getTime())/6e4;if(this.codigoR===n)return u>15?(this.codigoExpirado=!0,this.error="El c\xf3digo ha expirado",!0):(this.resetService.setCorreo(this.user.correo),this.modalService.dismissAll(),this.router.navigate(["/account/reset"]),!1);if(this.error="C\xf3digo no valido",this.verForm.invalid)return}}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(p.T),e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(o.qu),e.\u0275\u0275directiveInject(f),e.\u0275\u0275directiveInject(d.FF))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-verifcarcod"]],inputs:{user:"user"},decls:26,vars:6,consts:[[1,"card","overflow-hidden","log"],[1,"row","justify-content-center"],[1,"col-10","text-center","mt-3"],["src","assets/images/minerva2.png","alt","","width","100",1,"img-fluid"],[1,"mt-4","txtbl","txtsm"],[1,"card-body","pt-0","mt-3"],[1,"form-container","mt-3"],["name","resetForm","novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["type","danger",3,"dismissible",4,"ngIf"],[1,"mb-3"],["for","cod"],["type","cod","formControlName","cod","id","cod","placeholder","",1,"form-control","bg-light"],[1,"invalid-feedback"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-center","mt-5"],["type","submit",1,"btn","btn-dark","w-md","mb-5"],["type","danger",3,"dismissible"],[1,"text-danger"]],template:function(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"img",3),e.\u0275\u0275elementStart(4,"h2",4),e.\u0275\u0275text(5,"RECUPERACI\xd3N DE CONTRASE\xd1A"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"label"),e.\u0275\u0275text(8,"Hemos enviado un mensaje con un c\xf3digo al correo electr\xf3nico "),e.\u0275\u0275elementStart(9,"strong"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11,". Comprueba la bandeja de entrada e introduce el c\xf3digo proporcionado a continuaci\xf3n:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",6),e.\u0275\u0275elementStart(13,"form",7),e.\u0275\u0275listener("ngSubmit",function(){return r.codigoRecuperacionExpirado()}),e.\u0275\u0275template(14,H,2,2,"ngb-alert",8),e.\u0275\u0275elementStart(15,"div",9),e.\u0275\u0275elementStart(16,"label",10),e.\u0275\u0275text(17,"C\xf3digo de recuperaci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",11),e.\u0275\u0275elementStart(19,"div",12),e.\u0275\u0275template(20,X,2,0,"div",13),e.\u0275\u0275template(21,$,2,1,"span",14),e.\u0275\u0275template(22,K,2,1,"span",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",15),e.\u0275\u0275elementStart(24,"button",16),e.\u0275\u0275text(25,"Verificar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n){let a;e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(r.user.correo),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",r.verForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.error),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==(a=r.verForm.get("cod"))||null==a.errors?null:a.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.codigonoValido),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.codigoExpirado)}},directives:[o._Y,o.JL,o.sg,m.NgIf,o.Fj,o.JJ,o.u,d.xm],styles:['@charset "UTF-8";.log[_ngcontent-%COMP%]{border-radius:10%}.txtbl[_ngcontent-%COMP%]{color:#000;font-weight:bold;text-shadow:3px 3px 2px #d1d1d1}.txtsm[_ngcontent-%COMP%]{font-size:medium}.form-container[_ngcontent-%COMP%]{position:relative}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.account-pagess[_ngcontent-%COMP%]{height:70%}']}),t})();const Q=[{path:"login",component:P},{path:"reset-password",component:x},{path:"reset",component:Z},{path:"verificar",component:I}];let W=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(Q)],c.Bz]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.CommonModule,o.UX,o.u5,d._A,b.v,W,h.bB]]}),t})();e.\u0275\u0275setComponentScope(x,[o._Y,o.JL,o.sg,m.NgIf,d.xm,o.Fj,o.JJ,o.u,c.Od,I],[])}}]);