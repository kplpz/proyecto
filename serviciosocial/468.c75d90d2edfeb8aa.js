"use strict";(self.webpackChunkserviciosocial=self.webpackChunkserviciosocial||[]).push([[468],{2468:(V,f,a)=>{a.r(f),a.d(f,{CarreraModule:()=>k});var c=a(6019),h=a(6225),v=a(1659),m=a.n(v);class E{constructor(o,t){this.nombrecarrera=o,this.id=t}}var u=a(2501),S=a(3405),s=a(9133),x=a(8498),e=a(3668),g=a(540),b=a(2047),y=a(8260),C=a(4522);let T=(()=>{class n{constructor(t){this.http=t,this.url=`${y.N.urlG}/carrera`}carreras(){return this.http.get(`${this.url}`)}findByName(t){return this.http.get(`${this.url}/ifExist/${t}`)}guardarCarrera(t){return this.http.post(`${this.url}`,t).pipe((0,b.K)(r=>(m().fire("Error","Ya existe la carrera","error"),(0,g._)(r))))}eliminar(t){return this.http.delete(`${this.url}/${t}`).pipe((0,b.K)(r=>(m().fire("error",r.error.error),(0,g._)(r))))}editar(t){return this.http.put(`${this.url}/${t.id}`,t)}estudiantes(){return this.http.get(`${this.url}/estudiantes`)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(C.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=a(549),I=a(1950);function M(n,o){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Campo requerido "),e.\u0275\u0275elementEnd())}function F(n,o){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"No se permiten caracteres especiales "),e.\u0275\u0275elementEnd())}function _(n,o){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"4 caracteres m\xednimo "),e.\u0275\u0275elementEnd())}function N(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275elementStart(6,"button",26),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().paraEdit(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",27),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext().eliminar(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=o.$implicit,r=o.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.nombrecarrera)}}function O(n,o){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275elementStart(1,"h1",29),e.\u0275\u0275text(2,"Ayuda"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.dismiss("Cross click")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",31),e.\u0275\u0275elementStart(5,"div"),e.\u0275\u0275elementStart(6,"h2",32),e.\u0275\u0275text(7,"Ventana de Informaci\xf3n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"label",33),e.\u0275\u0275elementStart(9,"strong"),e.\u0275\u0275text(10,"\xbfC\xf3mo utilizar esta p\xe1gina?"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p",34),e.\u0275\u0275text(12,"Con el bot\xf3n "),e.\u0275\u0275elementStart(13,"strong"),e.\u0275\u0275text(14,"Guardar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(15," registramos una nueva carrera en el sistema."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"p",34),e.\u0275\u0275text(17,"Para editar se debe dar presionar el bot\xf3n "),e.\u0275\u0275elementStart(18,"strong"),e.\u0275\u0275text(19,"Editar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(20," de la carrera deseada. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"p",34),e.\u0275\u0275text(22,"El bot\xf3n "),e.\u0275\u0275elementStart(23,"strong"),e.\u0275\u0275text(24,"Eliminar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(25,", permite eliminar una carrera que no est\xe1 siendo utilizada. De lo contrario, dir\xe1 que el recurso no puede ser eliminado."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",35),e.\u0275\u0275elementStart(27,"button",36),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t).$implicit.close("Close click")}),e.\u0275\u0275text(28,"Cerrar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}}const w=[{path:"lista",component:(()=>{class n{constructor(t,r,i){this.carreraService=t,this.fb=r,this.modalService=i,this.carreras=[],this.dtOptions={},this.dtTrigger=new S.xQ,this.formulario=this.inifC()}ngOnInit(){this.breadCrumbItems=[{label:"Listado"}],this.dtOptions={columnDefs:[{orderable:!1,targets:[0,2]},{searchable:!1,targets:[0,2]},{responsivePriority:1,targets:-1}],lengthMenu:[5,10,20,50],destroy:!0,language:{url:"//cdn.datatables.net/plug-ins/1.13.5/i18n/es-ES.json",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"Ning\xfan dato encontrado"},pagingType:"full_numbers",responsive:!0},this.cargarDatos()}ngOnDestroy(){this.dtTrigger.unsubscribe()}inifC(){return this.fb.group({nombrecarrera:["",[s.kI.required,s.kI.minLength(4),s.kI.pattern(x.s2)]]})}cargarDatos(){this.carreraService.carreras().subscribe(t=>{this.carreras=t,this.dtTrigger.next(null),this.carrera=null}),this.carreraService.estudiantes().subscribe(t=>{this.estudiantes=t})}esCampoValido(t){const r=this.formulario.get(t);return!(null==r?void 0:r.valid)&&(null==r?void 0:r.touched)?"is-invalid":(null==r?void 0:r.touched)?"is-valid":""}push(){null!=this.carrera?this.editar():this.guardar()}guardar(){return this.carrera=new E(this.formulario.get("nombrecarrera").value),this.existe(this.carrera.nombrecarrera)?(m().fire("Error","Ya existe la carrera","error"),this.formulario.reset(),this.carrera=null):this.carreraService.guardarCarrera(this.carrera).subscribe(t=>{t?(m().fire("\xc9xito","Almacenado correctamente","success"),this.reload(),this.formulario.reset()):m().fire("Ocurrio un problema","","warning")}),this.formulario.reset(),Object.values(this.formulario.controls).forEach(t=>t.markAsTouched())}paraEdit(t){this.formulario.reset(),this.formulario.patchValue(t),this.carrera=t}editar(){this.carrera.nombrecarrera=this.formulario.controls.nombrecarrera.value,this.carreraService.editar(this.carrera).subscribe(t=>{m().fire("\xc9xito","Modificado correctamente","success"),this.formulario.get("nombrecarrera").setValue(""),this.reload()},t=>{m().fire({title:"Error",text:"Algo fallo",icon:"error"})}),this.formulario.reset()}eliminar(t){m().fire({title:"\xbfEst\xe1 seguro de eliminar? ",text:"Esto no se puede revertir",icon:"question",showCancelButton:!0,confirmButtonText:"S\xed, borrar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed?this.verificar(t.id)?m().fire("Error","El registro no puede ser eliminado","warning"):this.carreraService.eliminar(t.id).subscribe(l=>{m().fire("Eliminado","El registro ha sido eliminado","success"),this.formulario.reset(),this.reload()}):r.isDenied&&m().fire("Cambios no aplicados","","info")})}verificar(t){return this.estudiantes.some(r=>r.carrera.id===t)}reload(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.cargarDatos()})}existe(t){const r=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return this.carreras.some(i=>i.nombrecarrera.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase()===r.toLocaleLowerCase())}openModalA(t){this.modalService.open(t,{keyboard:!1,scrollable:!0,size:"lg"})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(T),e.\u0275\u0275directiveInject(s.qu),e.\u0275\u0275directiveInject(p.FF))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-carrera"]],viewQuery:function(t,r){if(1&t&&e.\u0275\u0275viewQuery(u.G,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(r.dtElement=i.first)}},decls:42,vars:11,consts:[[1,"container-fluid"],["title","Carrera",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"col-sm-3"],[1,"text-danger","mb-4"],[1,"col-sm-8"],[3,"formGroup","ngSubmit"],[1,"row","mb-5"],[1,"col-sm-5","text-start"],[1,"text-danger"],["type","text","name","nombrecarrera","autocomplete","off","formControlName","nombrecarrera",1,"form-control"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-sm-3","mt-4","ms-4"],[1,"btn","btn-info","bg-gradient",3,"disabled"],[1,"col-sm-1","text-end"],["type","button","data-toggle","tooltip","ngbTooltip","Ayuda","data-placement","end",1,"btn","btn-info","btn-icon","rounded-circle","btn-transparent",2,"margin-right","+35px",3,"click"],[1,"fa","fa-question-circle","fa-lg"],["datatable","","width","100%",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"bg-light","bg-gradient"],[1,""],[4,"ngFor","ngForOf"],["ayuda",""],["ngbTooltip","Editar",1,"btn","btn-outline-info","btn-sm","dripicons-document-edit",3,"click"],["ngbTooltip","Eliminar",1,"btn","btn-outline-danger","btn-sm","dripicons-cross",3,"click"],[1,"modal-header","bg"],[1,"modal-title","text-white"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body","text-justify"],[2,"margin-bottom","15px"],[1,"fs-5"],[2,"font-size","15px"],[1,"modal-footer"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(t,r){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"label",7),e.\u0275\u0275text(9," * Campo obligatorio"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275elementStart(11,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return r.push()}),e.\u0275\u0275elementStart(12,"div",10),e.\u0275\u0275elementStart(13,"div",11),e.\u0275\u0275elementStart(14,"label"),e.\u0275\u0275text(15,"Nombre Carrera"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"span",12),e.\u0275\u0275text(17," *"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",13),e.\u0275\u0275elementStart(19,"div",14),e.\u0275\u0275template(20,M,2,0,"span",15),e.\u0275\u0275template(21,F,2,0,"span",15),e.\u0275\u0275template(22,_,2,0,"span",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",16),e.\u0275\u0275elementStart(24,"button",17),e.\u0275\u0275text(25," Guardar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",18),e.\u0275\u0275elementStart(27,"button",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const d=e.\u0275\u0275reference(41);return r.openModalA(d)}),e.\u0275\u0275element(28,"i",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"table",21),e.\u0275\u0275elementStart(30,"thead",22),e.\u0275\u0275elementStart(31,"tr"),e.\u0275\u0275elementStart(32,"th",23),e.\u0275\u0275text(33,"N\xb0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"th",23),e.\u0275\u0275text(35,"Nombre"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"th",23),e.\u0275\u0275text(37,"Acciones"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"tbody",23),e.\u0275\u0275template(39,N,8,2,"tr",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(40,O,29,0,"ng-template",null,25,e.\u0275\u0275templateRefExtractor)}if(2&t){let i,l,d;e.\u0275\u0275advance(1),e.\u0275\u0275property("breadcrumbItems",r.breadCrumbItems),e.\u0275\u0275advance(10),e.\u0275\u0275property("formGroup",r.formulario),e.\u0275\u0275advance(7),e.\u0275\u0275classMap(r.esCampoValido("nombrecarrera")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",null==(i=r.formulario.get("nombrecarrera"))||null==i.errors?null:i.errors.required),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(l=r.formulario.get("nombrecarrera"))||null==l.errors?null:l.errors.pattern),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==(d=r.formulario.get("nombrecarrera"))||null==d.errors?null:d.errors.minlength),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!r.formulario.valid),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",r.carreras)}},directives:[I.V,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,c.NgIf,p._L,u.G,c.NgForOf],styles:['@charset "UTF-8";.bg[_ngcontent-%COMP%]{background-color:#6e0000}.btn-icon.rounded-circle[_ngcontent-%COMP%]{width:20px;height:20px;padding:0;line-height:25px;font-size:20px}.btn-transparent[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#007bff}.btn-transparent[_ngcontent-%COMP%]:hover{color:#0056b3}']}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[h.Bz.forChild(w)],h.Bz]}),n})();var j=a(3091);let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.CommonModule,$,u.T,s.UX,p.IJ,s.u5,j.v,C.JF]]}),n})()}}]);